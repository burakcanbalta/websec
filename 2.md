
# SQL Injection (SQLi) â€“ Temelden PratiÄŸe

Bu dokÃ¼man **SQL Injection (SQLi)** konusunu mantÄ±ÄŸÄ±yla, gerÃ§ek hayata yakÄ±n Ã¶rneklerle ve **PortSwigger Web Security Academy** yaklaÅŸÄ±mÄ±yla anlatmak iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r.

AmaÃ§ payload ezberi yapmak deÄŸil, bir **SQL sorgusunun nasÄ±l bozulduÄŸunu** gerÃ§ekten anlamaktÄ±r.

Bu iÃ§erik:
- YouTube eÄŸitim serisi iÃ§in uygundur
- GitHub README olarak direkt kullanÄ±labilir
- PortSwigger lablarÄ±yla birebir uyumludur

---

## Ä°Ã§indekiler
- SQL Injection Nedir?
- SQL Injection NasÄ±l Ã‡alÄ±ÅŸÄ±r?
- SQL Injection TÃ¼rleri
- SQL Sorgusu NasÄ±l Bozulur?
- Zafiyetli Flask + MySQL UygulamasÄ±
- Secure (GÃ¼venli) Versiyon
- SQL Injection NasÄ±l Tespit Edilir?
- Burp Suite & PortSwigger YaklaÅŸÄ±mÄ±
- YaygÄ±n SQL Injection SenaryolarÄ±
- SQL Injectionâ€™dan Korunma

---

## SQL Injection (SQLi) Nedir?

SQL Injection, bir web uygulamasÄ±nÄ±n kullanÄ±cÄ±dan aldÄ±ÄŸÄ± verileri **doÄŸrudan SQL sorgusu iÃ§ine eklemesi** sonucu ortaya Ã§Ä±kan kritik bir gÃ¼venlik aÃ§Ä±ÄŸÄ±dÄ±r.

Bu aÃ§Ä±k sayesinde saldÄ±rgan:
- Yetkisiz verilere eriÅŸebilir
- Kimlik doÄŸrulamayÄ± atlatabilir
- Verileri silebilir veya deÄŸiÅŸtirebilir
- BazÄ± durumlarda sunucuya kadar ilerleyebilir

SQL Injection, **OWASP Top 10** listesinde yÄ±llardÄ±r en tehlikeli aÃ§Ä±klardan biridir.

---

## SQL Injection NasÄ±l Ã‡alÄ±ÅŸÄ±r?

Tipik bir login sorgusu:

```sql
SELECT * FROM users 
WHERE username = 'kullanici' AND password = 'sifre';
```

EÄŸer input filtrelenmezse saldÄ±rgan ÅŸu deÄŸeri gÃ¶nderir:

```
' OR '1'='1
```

OluÅŸan sorgu:

```sql
SELECT * FROM users 
WHERE username = '' OR '1'='1' AND password = '';
```

`'1'='1'` her zaman **true** olduÄŸu iÃ§in parola kontrolÃ¼ devre dÄ±ÅŸÄ± kalÄ±r.

---

## SQL Injection TÃ¼rleri

### 1. In-Band SQL Injection
Uygulama hatayÄ± veya sonucu gÃ¶sterir.

```
' OR 1=1 --
```

---

### 2. UNION Based SQL Injection
BaÅŸka tablolardan veri Ã§ekmek iÃ§in kullanÄ±lÄ±r.

```
' UNION SELECT username, password FROM users --
```

---

### 3. Blind SQL Injection
SonuÃ§ ekrana basÄ±lmaz.

- Boolean Based
- Time Based
- Out-of-Band (OAST)

Ã–rnek:
```
' OR IF(1=1, SLEEP(5), 0) --
```

---

## SQL Sorgusu NasÄ±l Bozulur?

Kritik karakterler:
- `'` â†’ string kapatÄ±r
- `--` â†’ sorgunun kalanÄ±nÄ± yorum yapar
- `OR` â†’ mantÄ±ÄŸÄ± deÄŸiÅŸtirir

### ğŸ“¸ GÃ¶rsel Yerleri
- Basit `users` tablosu
- Normal SQL sorgusu diyagramÄ±
- `'` karakteriyle sorgunun kÄ±rÄ±lmasÄ±
- `--` ile password kontrolÃ¼nÃ¼n atlanmasÄ±

---

## Zafiyetli Flask + MySQL UygulamasÄ± (EÄŸitim AmaÃ§lÄ±)

âŒ **GÃœVENSÄ°Z KOD**

```python
from flask import Flask, request
import mysql.connector

app = Flask(__name__)

db = mysql.connector.connect(
    host="localhost",
    user="root",
    password="root",
    database="testdb"
)

@app.route("/login", methods=["POST"])
def login():
    username = request.form["username"]
    password = request.form["password"]

    cursor = db.cursor()
    query = f"SELECT * FROM users WHERE username = '{username}' AND password = '{password}'"
    cursor.execute(query)

    result = cursor.fetchone()

    if result:
        return "GiriÅŸ baÅŸarÄ±lÄ±"
    return "HatalÄ± bilgiler"

app.run(debug=True)
```

### Neden SQL Injection Var?
- String birleÅŸtirme kullanÄ±lÄ±yor
- Input validation yok
- Parametreli sorgu yok

---

## Secure (GÃ¼venli) Versiyon

âœ… **GÃœVENLÄ° KOD (Prepared Statement)**

```python
@app.route("/login", methods=["POST"])
def secure_login():
    username = request.form["username"]
    password = request.form["password"]

    cursor = db.cursor(prepared=True)
    query = "SELECT * FROM users WHERE username = %s AND password = %s"
    cursor.execute(query, (username, password))

    result = cursor.fetchone()

    if result:
        return "GiriÅŸ baÅŸarÄ±lÄ±"
    return "HatalÄ± bilgiler"
```

### Neden ArtÄ±k SQL Injection Yok?
- SQL ve veri ayrÄ±ldÄ±
- `'`, `OR`, `--` SQL mantÄ±ÄŸÄ±nÄ± bozamaz
- VeritabanÄ± inputâ€™u veri olarak iÅŸler

---

## SQL Injection NasÄ±l Tespit Edilir?

Manuel yaklaÅŸÄ±m:
- `'` gÃ¶nder â†’ hata var mÄ±?
- `OR 1=1` vs `OR 1=2`
- Time-based payload ile gecikme Ã¶lÃ§
- UNION ile kolon sayÄ±sÄ± dene

---

## Burp Suite & PortSwigger YaklaÅŸÄ±mÄ±

Burp Suite:
- Request yakalama
- Parametreleri tek tek test etme
- Response farkÄ± analizi

### ğŸ“¸ GÃ¶rseller
- Burp request/response ekranÄ±
- PortSwigger SQLi lab sayfasÄ±

PortSwigger Web Security Academy:
- GerÃ§ekÃ§i lablar
- MantÄ±k odaklÄ± ilerleme
- Ezber payload yok

---

## YaygÄ±n SQL Injection SenaryolarÄ±

**Login Bypass**
```
administrator' --
```

**TÃ¼m verileri Ã§ekme**
```
' OR 1=1 --
```

**Tablo keÅŸfi**
```
' UNION SELECT table_name, null FROM information_schema.tables --
```

---

## SQL Injectionâ€™dan Korunma

- Prepared Statements
- ORM kullanÄ±mÄ±
- Input validation
- Least privilege DB user
- Error mesajlarÄ±nÄ± gizleme

---

## SonuÃ§

SQL Injection Ã¶ÄŸrenirken Ã¶nemli olan payload deÄŸil,
**SQLâ€™in neden kÄ±rÄ±ldÄ±ÄŸÄ±nÄ± anlayabilmektir**.

Bu bakÄ±ÅŸ aÃ§Ä±sÄ±:
- Bug bounty
- Pentest
- Secure coding

iÃ§in seni bir Ã¼st seviyeye taÅŸÄ±r.
